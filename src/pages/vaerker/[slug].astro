---
import "../../styles/global.css";
import MainLayout from "../../layouts/MainLayouts.astro";

export async function getStaticPaths() {
  const data = await fetch("https://emsjqvuyxykavpzfimlr.supabase.co/rest/v1/clfprojektDatabase", {
    method: "GET",
    headers: {
      apikey: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImVtc2pxdnV5eHlrYXZwemZpbWxyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTA1MDQxNzcsImV4cCI6MjAyNjA4MDE3N30.zqi9zqOjYp3Us-cdJMfDCExuxOrcsg6VUG2HrMwBX_E",
    },
  }).then((response) => response.json());

  return data.map((vaerk) => {
    return {
      params: { slug: vaerk.slug },
      props: { myData: vaerk },
    };
  });
}
const { myData } = Astro.props;
console.log(myData);
---

<MainLayout title={myData.displayname}>
  <div class="extrapadding">
    <div class="grid1-1">
      <div class="col1">
        <div class="alignright">
          <h1>{myData.displayname}</h1><h3>{myData.neighborhood}, {myData.location}</h3>
        </div>
        <p>{myData.text1}</p>
      </div>
      <div class="col2">
        <img src={myData.image} alt={myData.displayname} />
      </div>
    </div>

    <h3>{myData.artist}</h3>

    <p>{myData.text2}</p>
    <p>{myData.text3}</p>
    <p>{myData.text4}</p>

    <p>Med hj√¶lp fra: {myData.credits}</p>
    <p>Tak til: {myData.sponsor}</p>
    <p>{myData.social1}</p>
    <p>{myData.social2}</p>
  </div>
</MainLayout>

<style>
  .extrapadding {
    padding-left: 5rem;
    padding-right: 5rem;
  }
  .grid1-1 {
    display: grid;
    grid-template-columns: 1fr 1fr;
  }
  img {
    width: 100%;
  }
  .alignright {
    text-align: right;
  }
</style>
